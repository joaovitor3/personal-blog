<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="shortcut icon" href="/personal-blog/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/personal-blog/manifest.json"><link rel="canonical" href="/posts/2020-06-20/first-evaluation" />

      <title data-rh="true">My first month in Google Summer of Code 2020</title>
      
      
    <script>window.__NAVI_STATE__={"__navi__":{"requestDataWithoutState":{}}};</script><link href="/personal-blog/static/css/main.554e0290.chunk.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="BlogLayout_container__1fiRb"><div class="
        LoadingIndicator_LoadingIndicator__3KSl0
        
        undefined
      "></div><header><h3 class="BlogLayout_title__3HyDU"><a href="/" class=" ">João Vitor</a></h3></header><main><article><header class="BlogPostLayout_header__1Ny4T"><h1 class="BlogPostLayout_title__2L_2_"><a href="/posts/2020-06-20/first-evaluation" class=" ">My first month in Google Summer of Code 2020</a></h1><small><time dateTime="Sat, 20 Jun 2020 03:00:00 GMT">June 20, 2020</time> <!-- -->•<!-- --> <ul class="ArticleMeta_tags__1IJ9w"><li><a href="/tags/GSoC" class=" ">GSoC</a></li><li><a href="/tags/Humanitarian OpenStreetMap" class=" ">Humanitarian OpenStreetMap</a></li></ul> <!-- -->•<!-- --> <span>☕️<!-- --> <!-- -->4<!-- --> min read</span></small></header><div class="BlogPostLayout_content__1mzTO"><h1 id="about-the-project">About the project</h1><p> <!-- --> <!-- --> <!-- --> <!-- -->The OpenStreetMap (OSM) project has established formal  Organised Editing Guidelines,
which require all groups and organized activities of mapping on OpenStreetMap to report
transparently how they organize and what they are mapping on.<br/>
<!-- --> <!-- --> <!-- --> <!-- --> <!-- -->The Tasking Manager is the most used application in the OSM ecosystem
for volunteers, but also professionals, to
team up and coordinate mapping. In order to ease up the user experience of fulfilling
the guidelines for organized editing, the goal of my project this summer is to make the
process of reporting back data for OpenStreetMap automatically.</p><h1 id="project-solutions">Project solutions</h1><p> <!-- --> <!-- --> <!-- --> <!-- -->In the first step, we started with an analysis of contents and fields
that are required or suggested by the organized editing guidelines, then we check whether
these are already available in the Tasking Manager, or not.<br/>
<!-- --> <!-- --> <!-- --> <!-- --> <!-- -->Then we implemented a small proof of concept for testing out how
the communication between Tasking Manager and OpenStreetMap should occur. Although the OSM’s organized editing
guidelines suggest the project wiki for reporting of organized mapping activities, we wanted to include
two technical ideas for this initial test:</p><ul><li>Report data directly to the OpenStreetMap wiki</li><li>Store files in a human-readable format in a git repository (GitHub, Gitlab, etc)</li></ul>    We would like to have a broader conversation about the benefits of each approach and we are planning to reach out to OSM’s Data Working Group to ask for their feedback.<h2 id="wiki-solution">Wiki solution</h2><p> <!-- --> <!-- --> <!-- --> <!-- -->To report data directly to the OpenStreetMap wiki, we adapted the solution
currently used by OpenStreetMap to the requirements of the Tasking Manager,
which was basically to adjust the existing pages on the OpenStreetMap wiki to a new format.
This was done using a python library called wikitextparser, which converts a string to
wikitext (the file format used on the OpenStreetMap wiki).<br/>
<!-- --> <!-- --> <!-- --> <!-- --> <!-- -->For creating and editing the pages of a MediaWiki instance
(OpenStreetMap, Wikipedia, and others are examples of MediaWiki instances) we
used the MediaWiki API. Below is a very simple example of adding a table
in a wiki page via the Mediawiki API.</p><pre><code class="language-python" data-language="python" data-highlighted-line-numbers=""><span class="token keyword">import</span> requests

<span class="token comment"># Data of table to be added in the wiki page</span>
table_data <span class="token operator">=</span> <span class="token punctuation">(</span>
   <span class="token string">"{|class='wikitable sortable'\n"</span>
   <span class="token string">"|-\n"</span>
   <span class="token string">'! scope="col" | Name\n'</span>
   <span class="token string">'! scope="col" | Link\n'</span>
   <span class="token string">"|-\n"</span>
   <span class="token string">"| Covid 19\n"</span>
   <span class="token string">"| [[COVID19]]\n"</span>
   <span class="token string">"|-\n"</span>
   <span class="token string">"|}\n"</span>
<span class="token punctuation">)</span>
 
<span class="token comment"># params of request to create wiki page</span>
params <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token string">"action"</span><span class="token punctuation">:</span> <span class="token string">"edit"</span><span class="token punctuation">,</span>
   <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"covid 19"</span><span class="token punctuation">,</span>
   <span class="token string">"createonly"</span><span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
   <span class="token string">"contentmodel"</span><span class="token punctuation">:</span> <span class="token string">"wikitext"</span><span class="token punctuation">,</span>
   <span class="token string">"bot"</span><span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
   <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token string">"json"</span>
<span class="token punctuation">}</span>
 
<span class="token comment"># request to create wiki page</span>
session <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span>post<span class="token punctuation">(</span>
   url<span class="token operator">=</span>WIKI_API_ENDPOINT<span class="token punctuation">,</span>
   params<span class="token operator">=</span>params<span class="token punctuation">,</span>
   data<span class="token operator">=</span><span class="token punctuation">{</span>
       <span class="token string">"token"</span><span class="token punctuation">:</span> WIKI_API_TOKEN<span class="token punctuation">,</span>
       <span class="token string">"text"</span><span class="token punctuation">:</span> table_data
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><h2 id="git-solution">Git solution</h2><p> <!-- --> <!-- --> <!-- --> <!-- -->To store files in a human-readable format, the python library
YAML was used, which converts YAML to other native python formats and vice versa.
To save and edit the YAML files in a git repository, the GitHub API was used. Below
is a code example that parses a python dictionary to a YAML file and saves it in a GitHub repository.</p><pre><code class="language-python" data-language="python" data-highlighted-line-numbers=""><span class="token keyword">import</span> yaml
<span class="token keyword">import</span> base64
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json
 
<span class="token comment"># Data of the yaml file to be saved in the repo</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token string">"project"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
       <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Covid 19"</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token comment"># parse json to yaml encoded in base64</span>
yaml_file <span class="token operator">=</span> yaml<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>data<span class="token punctuation">,</span> allow_unicode<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
encoded_yaml_file <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span><span class="token builtin">bytes</span><span class="token punctuation">(</span>yaml_file<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
<span class="token comment"># request data in the format required by github API</span>
request_data <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token string">"committer"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
       <span class="token string">"name"</span><span class="token punctuation">:</span> GITHUB_COMMITER_NAME<span class="token punctuation">,</span>
       <span class="token string">"email"</span><span class="token punctuation">:</span> GITHUB_COMMITER_EMAIL
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Add project title"</span><span class="token punctuation">,</span>
   <span class="token string">"content"</span><span class="token punctuation">:</span> encoded_yaml_file<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token comment"># create yaml file in the root of repo</span>
requests<span class="token punctuation">.</span>put<span class="token punctuation">(</span>
   <span class="token string">"https://api.github.com/"</span>
   <span class="token string-interpolation"><span class="token string">f"repos/</span><span class="token interpolation"><span class="token punctuation">{</span>GITHUB_REPOSITORY<span class="token punctuation">}</span></span><span class="token string">/contents/covid19_project.yaml"</span></span><span class="token punctuation">,</span>
   headers<span class="token operator">=</span><span class="token punctuation">{</span>
       <span class="token string">"Content-Type"</span><span class="token punctuation">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>
       <span class="token string">"Authorization"</span><span class="token punctuation">:</span> <span class="token string">"Bearer "</span> <span class="token operator">+</span> GITHUB_API_TOKEN
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   data<span class="token operator">=</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>request_data<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

</code></pre><h1 id="missing-fields">Missing fields</h1><p> <!-- --> <!-- --> <!-- --> <!-- -->Also, it was necessary to add the required or suggested
fields by the organized editing guidelines that were not included in the Tasking Manager.
Some of these fields are just waiting for the Pull Request approval for being added to
the Tasking Manager codebase, and the other ones that aren’t included in Pull Requests
are just waiting for the OSM’s Data Working Group feedback, if their inclusion is really necessary.</p><h1 id="conclusion">Conclusion</h1><p> <!-- --> <!-- --> <!-- --> <!-- -->The first month of GsoC has been an extraordinary experience.
I am acquiring a lot of knowledge in this short period of time. In addition,
I also see it as an excellent opportunity to apply all the content seen in the
subjects of the college. Stay tuned for the second evaluation post. See y’all!</p></div><footer class="BlogPostLayout_footer__3ofxa"><h3 class="BlogPostLayout_title__2L_2_"><a href="/" class=" ">João Vitor</a></h3><div class="
      Bio_Bio__1ks_2
      BlogPostLayout_bio__diNn9
    "><img src="/personal-blog/static/media/profile.69b941f1.jpg" alt="Me"/><p>Software engineering student, at University of Brasília.<br/>Brasília, Brazil</p></div><section class="BlogPostLayout_links__-LX2X"></section></footer></article></main></div></div><script>!function(c){function e(e){for(var t,r,n=e[0],o=e[1],a=e[2],u=0,i=[];u<n.length;u++)r=n[u],d[r]&&i.push(d[r][0]),d[r]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(c[t]=o[t]);for(h&&h(e);i.length;)i.shift()();return f.push.apply(f,a||[]),l()}function l(){for(var e,t=0;t<f.length;t++){for(var r=f[t],n=!0,o=1;o<r.length;o++){var a=r[o];0!==d[a]&&(n=!1)}n&&(f.splice(t--,1),e=p(p.s=r[0]))}return e}var r={},s={1:0},d={1:0},f=[];function p(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,p),t.l=!0,t.exports}p.e=function(f){var e=[];s[f]?e.push(s[f]):0!==s[f]&&{3:1,4:1}[f]&&e.push(s[f]=new Promise(function(e,n){for(var t="static/css/"+({}[f]||f)+"."+{3:"17727e1f",4:"15f7c63d",5:"31d6cfe0",6:"31d6cfe0",7:"31d6cfe0"}[f]+".chunk.css",o=p.p+t,r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var u=(c=r[a]).getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===t||u===o))return e()}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){var c;if((u=(c=i[a]).getAttribute("data-href"))===t||u===o)return e()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=e,l.onerror=function(e){var t=e&&e.target&&e.target.src||o,r=new Error("Loading CSS chunk "+f+" failed.\n("+t+")");r.request=t,delete s[f],l.parentNode.removeChild(l),n(r)},l.href=o,document.getElementsByTagName("head")[0].appendChild(l)}).then(function(){s[f]=0}));var r=d[f];if(0!==r)if(r)e.push(r[2]);else{var t=new Promise(function(e,t){r=d[f]=[e,t]});e.push(r[2]=t);var n,a=document.createElement("script");a.charset="utf-8",a.timeout=120,p.nc&&a.setAttribute("nonce",p.nc),a.src=p.p+"static/js/"+({}[f]||f)+"."+{3:"6c4419a6",4:"dfe6fbad",5:"afed9d52",6:"91df7a2b",7:"48973b39"}[f]+".chunk.js",n=function(e){a.onerror=a.onload=null,clearTimeout(u);var t=d[f];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,o=new Error("Loading chunk "+f+" failed.\n("+r+": "+n+")");o.type=r,o.request=n,t[1](o)}d[f]=void 0}};var u=setTimeout(function(){n({type:"timeout",target:a})},12e4);a.onerror=a.onload=n,document.head.appendChild(a)}return Promise.all(e)},p.m=c,p.c=r,p.d=function(e,t,r){p.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(t,e){if(1&e&&(t=p(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(p.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)p.d(r,n,function(e){return t[e]}.bind(null,n));return r},p.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(t,"a",t),t},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.p="/personal-blog/",p.oe=function(e){throw console.error(e),e};var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var h=n;l()}([])</script><script src="/personal-blog/static/js/2.b41d3ab4.chunk.js"></script><script src="/personal-blog/static/js/main.6d4fd822.chunk.js"></script></body></html>