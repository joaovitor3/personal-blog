(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{50:function(n,a,s){"use strict";s.r(a),s.d(a,"readingTime",function(){return o}),s.d(a,"default",function(){return c}),s.d(a,"tableOfContents",function(){return l}),s.d(a,"frontMatter",function(){return r});var t=s(14),e=(s(0),s(20));const o={text:"4 min read",minutes:3.575,time:214500,words:715},p={},i="wrapper";function c(n){let a=n.components,s=Object(t.a)(n,["components"]);return Object(e.b)(i,Object.assign({},p,s,{components:a,mdxType:"MDXLayout"}),Object(e.b)("h1",{id:"about-the-project"},"About the project"),Object(e.b)("p",null,"\u2002","\u2002","\u2002","\u2002","The OpenStreetMap (OSM) project has established formal  Organised Editing Guidelines,\nwhich require all groups and organized activities of mapping on OpenStreetMap to report\ntransparently how they organize and what they are mapping on.",Object(e.b)("br",null),"\n","\u2002","\u2002","\u2002","\u2002","The Tasking Manager is the most used application in the OSM ecosystem\nfor volunteers, but also professionals, to\nteam up and coordinate mapping. In order to ease up the user experience of fulfilling\nthe guidelines for organized editing, the goal of my project this summer is to make the\nprocess of reporting back data for OpenStreetMap automatically."),Object(e.b)("h1",{id:"project-solutions"},"Project solutions"),Object(e.b)("p",null,"\u2002","\u2002","\u2002","\u2002","In the first step, we started with an analysis of contents and fields\nthat are required or suggested by the organized editing guidelines, then we check whether\nthese are already available in the Tasking Manager, or not.",Object(e.b)("br",null),"\n","\u2002","\u2002","\u2002","\u2002","Then we implemented a small proof of concept for testing out how\nthe communication between Tasking Manager and OpenStreetMap should occur. Although the OSM\u2019s organized editing\nguidelines suggest the project wiki for reporting of organized mapping activities, we wanted to include\ntwo technical ideas for this initial test:"),Object(e.b)("ul",null,Object(e.b)("li",null,"Report data directly to the OpenStreetMap wiki"),Object(e.b)("li",null,"Store files in a human-readable format in a git repository (GitHub, Gitlab, etc)")),"\u2002\u2002\u2002\u2002We would like to have a broader conversation about the benefits of each approach and we are planning to reach out to OSM\u2019s Data Working Group to ask for their feedback.",Object(e.b)("h2",{id:"wiki-solution"},"Wiki solution"),Object(e.b)("p",null,"\u2002","\u2002","\u2002","\u2002","To report data directly to the OpenStreetMap wiki, we adapted the solution\ncurrently used by OpenStreetMap to the requirements of the Tasking Manager,\nwhich was basically to adjust the existing pages on the OpenStreetMap wiki to a new format.\nThis was done using a python library called wikitextparser, which converts a string to\nwikitext (the file format used on the OpenStreetMap wiki).",Object(e.b)("br",null),"\n","\u2002","\u2002","\u2002","\u2002","For creating and editing the pages of a MediaWiki instance\n(OpenStreetMap, Wikipedia, and others are examples of MediaWiki instances) we\nused the MediaWiki API. Below is a very simple example of adding a table\nin a wiki page via the Mediawiki API."),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-python","data-language":"python","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> requests\n\n<span class="token comment"># Data of table to be added in the wiki page</span>\ntable_data <span class="token operator">=</span> <span class="token punctuation">(</span>\n   <span class="token string">"{|class=\'wikitable sortable\'\\n"</span>\n   <span class="token string">"|-\\n"</span>\n   <span class="token string">\'! scope="col" | Name\\n\'</span>\n   <span class="token string">\'! scope="col" | Link\\n\'</span>\n   <span class="token string">"|-\\n"</span>\n   <span class="token string">"| Covid 19\\n"</span>\n   <span class="token string">"| [[COVID19]]\\n"</span>\n   <span class="token string">"|-\\n"</span>\n   <span class="token string">"|}\\n"</span>\n<span class="token punctuation">)</span>\n \n<span class="token comment"># params of request to create wiki page</span>\nparams <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token string">"action"</span><span class="token punctuation">:</span> <span class="token string">"edit"</span><span class="token punctuation">,</span>\n   <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"covid 19"</span><span class="token punctuation">,</span>\n   <span class="token string">"createonly"</span><span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>\n   <span class="token string">"contentmodel"</span><span class="token punctuation">:</span> <span class="token string">"wikitext"</span><span class="token punctuation">,</span>\n   <span class="token string">"bot"</span><span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>\n   <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token string">"json"</span>\n<span class="token punctuation">}</span>\n \n<span class="token comment"># request to create wiki page</span>\nsession <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>\nsession<span class="token punctuation">.</span>post<span class="token punctuation">(</span>\n   url<span class="token operator">=</span>WIKI_API_ENDPOINT<span class="token punctuation">,</span>\n   params<span class="token operator">=</span>params<span class="token punctuation">,</span>\n   data<span class="token operator">=</span><span class="token punctuation">{</span>\n       <span class="token string">"token"</span><span class="token punctuation">:</span> WIKI_API_TOKEN<span class="token punctuation">,</span>\n       <span class="token string">"text"</span><span class="token punctuation">:</span> table_data\n   <span class="token punctuation">}</span>\n<span class="token punctuation">)</span>\n'}}))),Object(e.b)("h2",{id:"git-solution"},"Git solution"),Object(e.b)("p",null,"\u2002","\u2002","\u2002","\u2002","To store files in a human-readable format, the python library\nYAML was used, which converts YAML to other native python formats and vice versa.\nTo save and edit the YAML files in a git repository, the GitHub API was used. Below\nis a code example that parses a python dictionary to a YAML file and saves it in a GitHub repository."),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-python","data-language":"python","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> yaml\n<span class="token keyword">import</span> base64\n<span class="token keyword">import</span> requests\n<span class="token keyword">import</span> json\n \n<span class="token comment"># Data of the yaml file to be saved in the repo</span>\ndata <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token string">"project"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n       <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Covid 19"</span><span class="token punctuation">,</span>\n   <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n \n<span class="token comment"># parse json to yaml encoded in base64</span>\nyaml_file <span class="token operator">=</span> yaml<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>data<span class="token punctuation">,</span> allow_unicode<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>\nencoded_yaml_file <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span><span class="token builtin">bytes</span><span class="token punctuation">(</span>yaml_file<span class="token punctuation">,</span> <span class="token string">\'utf-8\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n \n<span class="token comment"># request data in the format required by github API</span>\nrequest_data <span class="token operator">=</span> <span class="token punctuation">{</span>\n   <span class="token string">"committer"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n       <span class="token string">"name"</span><span class="token punctuation">:</span> GITHUB_COMMITER_NAME<span class="token punctuation">,</span>\n       <span class="token string">"email"</span><span class="token punctuation">:</span> GITHUB_COMMITER_EMAIL\n   <span class="token punctuation">}</span><span class="token punctuation">,</span>\n   <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Add project title"</span><span class="token punctuation">,</span>\n   <span class="token string">"content"</span><span class="token punctuation">:</span> encoded_yaml_file<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n \n<span class="token comment"># create yaml file in the root of repo</span>\nrequests<span class="token punctuation">.</span>put<span class="token punctuation">(</span>\n   <span class="token string">"https://api.github.com/"</span>\n   <span class="token string-interpolation"><span class="token string">f"repos/</span><span class="token interpolation"><span class="token punctuation">{</span>GITHUB_REPOSITORY<span class="token punctuation">}</span></span><span class="token string">/contents/covid19_project.yaml"</span></span><span class="token punctuation">,</span>\n   headers<span class="token operator">=</span><span class="token punctuation">{</span>\n       <span class="token string">"Content-Type"</span><span class="token punctuation">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>\n       <span class="token string">"Authorization"</span><span class="token punctuation">:</span> <span class="token string">"Bearer "</span> <span class="token operator">+</span> GITHUB_API_TOKEN\n   <span class="token punctuation">}</span><span class="token punctuation">,</span>\n   data<span class="token operator">=</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>request_data<span class="token punctuation">)</span>\n<span class="token punctuation">)</span>\n\n'}}))),Object(e.b)("h1",{id:"missing-fields"},"Missing fields"),Object(e.b)("p",null,"\u2002","\u2002","\u2002","\u2002","Also, it was necessary to add the required or suggested\nfields by the organized editing guidelines that were not included in the Tasking Manager.\nSome of these fields are just waiting for the Pull Request approval for being added to\nthe Tasking Manager codebase, and the other ones that aren\u2019t included in Pull Requests\nare just waiting for the OSM\u2019s Data Working Group feedback, if their inclusion is really necessary."),Object(e.b)("h1",{id:"conclusion"},"Conclusion"),Object(e.b)("p",null,"\u2002","\u2002","\u2002","\u2002","The first month of GsoC has been an extraordinary experience.\nI am acquiring a lot of knowledge in this short period of time. In addition,\nI also see it as an excellent opportunity to apply all the content seen in the\nsubjects of the college. Stay tuned for the second evaluation post. See y\u2019all!"))}c.isMDXComponent=!0;const l=(n={})=>[{id:"wiki-solution",level:2,title:"Wiki solution",children:[]},{id:"git-solution",level:2,title:"Git solution",children:[]}],r={}}}]);
//# sourceMappingURL=7.48973b39.chunk.js.map